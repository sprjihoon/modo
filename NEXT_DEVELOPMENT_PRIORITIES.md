# 다음 개발 우선순위

## 📅 최종 업데이트: 2024년 11월

---

## 🎯 현재 개발 상태 요약

### ✅ 완료된 주요 기능
- **모바일 앱**: UI/UX 완성 (30+ 페이지)
- **관리자 페이지**: 전체 모니터링 시스템 구축
  - 대시보드, 주문 관리, 고객 관리
  - 결제 내역, 포인트 관리, 통계 및 분석
  - 영상 관리, 설정 (푸터 관리 포함)
  - 결제 취소/환불 기능 (전체, 부분, 재승인)

### ⚠️ 현재 상태
- **Mock 데이터 사용 중**: 대부분의 기능이 Mock 데이터로 동작
- **Supabase 연동 필요**: 실제 백엔드 연동 미완료
- **결제 시스템**: UI만 완성, 실제 결제 연동 필요

---

## 🔥 우선순위 1: 백엔드 연동 (Critical - 1-2주)

### 1.1 Supabase 인증 연동 (3-5일)
**목표**: 실제 사용자 인증 시스템 구축

**작업 내용**:
- [ ] Flutter 앱에 Supabase 클라이언트 설정
- [ ] 로그인 API 연동 (`auth.signInWithPassword`)
- [ ] 회원가입 API 연동 (`auth.signUp`)
- [ ] 이메일/전화번호 중복 체크 API
- [ ] 비밀번호 재설정 이메일 발송 (`auth.resetPasswordForEmail`)
- [ ] 소셜 로그인 연동 (Google, Naver, Kakao)
- [ ] 세션 관리 및 자동 로그인
- [ ] 로그아웃 기능

**예상 소요 시간**: 3-5일
**영향도**: 높음 (모든 기능의 기반)

---

### 1.2 주문 API 연동 (5-7일)
**목표**: 주문 생성부터 조회까지 전체 플로우 연동

**작업 내용**:
- [ ] 주문 생성 API (`orders` 테이블 INSERT)
- [ ] 주문 목록 조회 API (필터링, 페이징)
- [ ] 주문 상세 조회 API
- [ ] 주문 상태 변경 API
- [ ] 이미지 업로드 (Supabase Storage)
- [ ] 핀 데이터 저장/조회 (`image_pins` 테이블)
- [ ] 주문 수정 API (BOOKED, INBOUND 상태에서만)

**예상 소요 시간**: 5-7일
**영향도**: 매우 높음 (핵심 비즈니스 로직)

---

### 1.3 프로필 API 연동 (3-4일)
**목표**: 사용자 정보 및 설정 관리

**작업 내용**:
- [ ] 회원정보 조회/수정 API (`users` 테이블)
- [ ] 비밀번호 변경 API (`auth.updateUser`)
- [ ] 배송지 CRUD API (`addresses` 테이블)
- [ ] 결제 내역 조회 API (`payments` 테이블)
- [ ] 포인트 내역 조회 API (`point_transactions` 테이블)
- [ ] 프로필 이미지 업로드

**예상 소요 시간**: 3-4일
**영향도**: 높음 (사용자 경험)

---

## 🚀 우선순위 2: 핵심 기능 완성 (High - 2-3주)

### 2.1 결제 시스템 연동 (7-10일)
**목표**: 실제 결제 처리 및 관리

**작업 내용**:
- [ ] PortOne SDK 연동 (Flutter)
- [ ] 결제수단 등록/삭제 API
- [ ] 결제 요청 API (`payments-verify` Edge Function)
- [ ] 결제 내역 저장 (`payments` 테이블)
- [ ] 결제 취소/환불 API (PortOne)
- [ ] 부분환불 처리 로직
- [ ] 재승인 처리 로직
- [ ] 결제 실패 처리 및 재시도

**예상 소요 시간**: 7-10일
**영향도**: 매우 높음 (수익 창출)

---

### 2.2 수거/배송 관리 (5-7일)
**목표**: 수거 신청부터 배송까지 전체 프로세스

**작업 내용**:
- [ ] 수거 신청 API (`shipments-book` Edge Function)
- [ ] 우체국 API 연동 (송장번호 발급)
- [ ] 송장번호 저장 (`shipments` 테이블)
- [ ] 배송 추적 API 연동
- [ ] 수거 취소 API
- [ ] 배송 상태 업데이트
- [ ] 송장 라벨 PDF 생성

**예상 소요 시간**: 5-7일
**영향도**: 높음 (운영 효율성)

---

### 2.3 이미지 처리 개선 (3-5일)
**목표**: 이미지 업로드 및 최적화

**작업 내용**:
- [ ] 이미지 압축 (Flutter `image` 패키지)
- [ ] Supabase Storage 업로드
- [ ] 이미지 URL 저장
- [ ] 핀 데이터 저장/불러오기
- [ ] 이미지 삭제 기능
- [ ] 이미지 캐싱

**예상 소요 시간**: 3-5일
**영향도**: 중간 (사용자 경험)

---

## 📊 우선순위 3: 관리자 기능 완성 (Medium - 1-2주)

### 3.1 관리자 API 연동 (5-7일)
**목표**: 관리자 페이지 실제 데이터 연동

**작업 내용**:
- [ ] 주문 목록 API 연동 (필터링, 검색, 페이징)
- [ ] 주문 상태 변경 API
- [ ] 고객 목록 API 연동
- [ ] 결제 내역 API 연동
- [ ] 포인트 내역 API 연동
- [ ] 통계 데이터 API 연동
- [ ] 실시간 활동 로그

**예상 소요 시간**: 5-7일
**영향도**: 중간 (운영 효율성)

---

### 3.2 영상 관리 시스템 (5-7일)
**목표**: 수선 과정 영상 업로드 및 재생

**작업 내용**:
- [ ] Cloudflare Stream 연동
- [ ] 영상 업로드 API (`videos-upload` Edge Function)
- [ ] 영상 목록 조회
- [ ] 영상 재생 기능 (HLS)
- [ ] 영상 미리보기
- [ ] 영상 삭제 기능

**예상 소요 시간**: 5-7일
**영향도**: 중간 (차별화 기능)

---

## 🔔 우선순위 4: 사용자 경험 개선 (Medium - 1-2주)

### 4.1 푸시 알림 (5-7일)
**목표**: 실시간 알림으로 사용자 참여도 향상

**작업 내용**:
- [ ] FCM (Firebase Cloud Messaging) 설정
- [ ] 주문 상태 변경 알림
- [ ] 배송 알림
- [ ] 결제 완료 알림
- [ ] 프로모션 알림
- [ ] 알림 설정 관리

**예상 소요 시간**: 5-7일
**영향도**: 중간 (사용자 참여도)

---

### 4.2 에러 처리 및 로딩 상태 (3-5일)
**목표**: 안정적인 사용자 경험

**작업 내용**:
- [ ] 전역 에러 핸들러
- [ ] 네트워크 에러 처리
- [ ] 로딩 상태 표시
- [ ] 재시도 로직
- [ ] 사용자 친화적 에러 메시지
- [ ] 오프라인 모드 처리

**예상 소요 시간**: 3-5일
**영향도**: 중간 (안정성)

---

## 🎨 우선순위 5: 추가 기능 (Low - 2-3주)

### 5.1 공지사항 관리 (3-5일)
- [ ] 공지사항 CRUD API
- [ ] 공지사항 상세 페이지
- [ ] 중요 공지 표시
- [ ] 이미지 첨부 기능

### 5.2 친구초대 시스템 (5-7일)
- [ ] 초대 링크 생성
- [ ] 초대 보상 시스템
- [ ] 초대 내역 관리
- [ ] 추천인 추적

### 5.3 가격표/가이드 페이지 (2-3일)
- [ ] 수선 가격표 페이지
- [ ] 이용 가이드 페이지
- [ ] FAQ 페이지

### 5.4 앱 설정 (2-3일)
- [ ] 알림 설정
- [ ] 언어 설정
- [ ] 다크모드

---

## 📅 개발 일정 제안

### Phase 1: 백엔드 연동 (2주)
**Week 1**:
- Supabase 인증 연동 (3일)
- 주문 API 연동 시작 (2일)

**Week 2**:
- 주문 API 연동 완료 (3일)
- 프로필 API 연동 (2일)

### Phase 2: 핵심 기능 (3주)
**Week 3**:
- 결제 시스템 연동 (5일)

**Week 4**:
- 수거/배송 관리 (5일)

**Week 5**:
- 이미지 처리 개선 (3일)
- 관리자 API 연동 시작 (2일)

### Phase 3: 완성도 향상 (2주)
**Week 6**:
- 관리자 API 연동 완료 (3일)
- 영상 관리 시스템 (2일)

**Week 7**:
- 푸시 알림 (5일)

### Phase 4: 추가 기능 (2주)
**Week 8-9**:
- 에러 처리 및 로딩 상태
- 공지사항 관리
- 친구초대 시스템
- 가격표/가이드 페이지

---

## 🎯 MVP 출시 목표 (4주)

### 필수 기능 (MVP)
1. ✅ 사용자 인증 (로그인/회원가입)
2. ✅ 주문 생성 및 조회
3. ✅ 결제 처리
4. ✅ 수거 신청
5. ✅ 관리자 주문 관리

### 제외 기능 (MVP 이후)
- 영상 관리
- 푸시 알림
- 친구초대 시스템
- 가격표/가이드 페이지

---

## 📝 다음 스프린트 (1주)

### 즉시 시작할 작업
1. **Supabase 인증 연동** (3일)
   - Flutter Supabase 클라이언트 설정
   - 로그인/회원가입 API 연동
   - 세션 관리

2. **주문 생성 API 연동** (2일)
   - 주문 생성 API
   - 이미지 업로드
   - 핀 데이터 저장

---

## 💡 기술적 고려사항

### 보안
- [ ] RLS (Row Level Security) 정책 검토
- [ ] API 키 관리
- [ ] 사용자 권한 관리

### 성능
- [ ] 이미지 최적화
- [ ] API 응답 캐싱
- [ ] 리스트 가상화

### 테스트
- [ ] 단위 테스트
- [ ] 통합 테스트
- [ ] E2E 테스트

---

## 📞 문의

개발 우선순위 관련 문의사항은 이슈 트래커를 통해 등록해주세요.

