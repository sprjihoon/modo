# μ°μ²΄κµ­ API κ°λ° μ²΄ν¬λ¦¬μ¤νΈ

## μ‹¤μ  μκ±°μμ•½ λ“±λ΅ ν™•μΈμ„ μ„ν• κ°λ° μ²΄ν¬ ν•­λ©

### 1. testYn νλΌλ―Έν„° ν™•μΈ
- [ ] `test_mode` νλΌλ―Έν„°κ°€ `false`λ΅ μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `epostParams.testYn`μ΄ `'N'`μΌλ΅ μ„¤μ •λμ—λ”μ§€ ν™•μΈ
- [ ] `testYn='N'`μΌ λ• URL νλΌλ―Έν„°μ— `testYn`μ΄ ν¬ν•¨λμ§€ μ•λ”μ§€ ν™•μΈ
- [ ] `testYn='Y'`μΌ λ•λ§ URL νλΌλ―Έν„°μ— `testYn=Y`κ°€ μ¶”κ°€λλ”μ§€ ν™•μΈ

### 2. regData νλΌλ―Έν„° ν™•μΈ
- [ ] `regData`μ— `testYn`μ΄ ν¬ν•¨λμ§€ μ•λ”μ§€ ν™•μΈ
- [ ] `regData`μ— ν•„μ”ν• λ¨λ“  νλΌλ―Έν„°κ°€ ν¬ν•¨λμ—λ”μ§€ ν™•μΈ
- [ ] `regData`κ°€ μ¬λ°”λ¥΄κ² μ•”νΈν™”λμ—λ”μ§€ ν™•μΈ

### 3. API νΈμ¶ νλΌλ―Έν„° ν™•μΈ
- [ ] `custNo` (κ³ κ°λ²νΈ)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `apprNo` (κ³„μ•½ μΉμΈλ²νΈ)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `orderNo` (μ£Όλ¬Έλ²νΈ)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `recNm` (μμ·¨μΈλ…)μ΄ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `recZip` (μ°νΈλ²νΈ)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `recAddr1` (μ£Όμ†)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `recAddr2` (μƒμ„Έμ£Όμ†)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `recTel` (μ „ν™”λ²νΈ)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `officeSer` (κ³µκΈ‰μ§€ μ½”λ“)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `weight` (μ¤‘λ‰)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
- [ ] `volume` (ν¬κΈ°)κ°€ μ¬λ°”λ¥΄κ² μ „λ‹¬λμ—λ”μ§€ ν™•μΈ

### 4. API μ‘λ‹µ ν™•μΈ
- [ ] `regiNo` (μ΄μ†΅μ¥λ²νΈ)λ¥Ό λ°›μ•λ”μ§€ ν™•μΈ
- [ ] `resNo` (μ†ν¬ μμ•½λ²νΈ)λ¥Ό λ°›μ•λ”μ§€ ν™•μΈ
- [ ] `resDate` (μμ•½ μΌμ‹)λ¥Ό λ°›μ•λ”μ§€ ν™•μΈ
- [ ] `regiPoNm` (μ ‘μ μ°μ²΄κµ­λ…)μ„ λ°›μ•λ”μ§€ ν™•μΈ

### 5. μκ±°μμ•½ μƒνƒ ν™•μΈ
- [ ] `getResInfo` APIλ¥Ό νΈμ¶ν•μ—¬ μκ±°μμ•½ μƒνƒ ν™•μΈ
- [ ] `treatStusCd` (μ†ν¬ μ²λ¦¬μƒνƒ μ½”λ“) ν™•μΈ:
  - `00`: μ‹ μ²­μ¤€λΉ„
  - `01`: μ†ν¬μ‹ μ²­ (μ‹¤μ  μκ±°μμ•½ λ“±λ΅λ¨)
  - `02`: μ΄μ†΅μ¥μ¶λ ¥
  - `03`: μ§‘ν•μ™„λ£
  - `04`: λ°°μ†΅μ¤‘
  - `05`: λ°°μ†΅μ™„λ£
- [ ] `treatStusCd`κ°€ `00` λλ” `01`μ΄λ©΄ μ‹¤μ  μκ±°μμ•½μ΄ λ“±λ΅λ κ²ƒμΌλ΅ ν™•μΈ

### 6. λ΅κ·Έ ν™•μΈ
- [ ] Supabase Edge Functions λ΅κ·Έμ—μ„ λ‹¤μ μ •λ³΄ ν™•μΈ:
  - `test_mode` κ°’
  - `testYn` κ°’
  - API νΈμ¶ μ „ νλΌλ―Έν„° κ²€μ¦ λ΅κ·Έ
  - API μ‘λ‹µ κ²€μ¦ λ΅κ·Έ
  - μκ±°μμ•½ μƒνƒ ν™•μΈ κ²°κ³Ό λ΅κ·Έ
  - URL νλΌλ―Έν„° ν™•μΈ λ΅κ·Έ
  - regData νλΌλ―Έν„° ν™•μΈ λ΅κ·Έ

### 7. ν™κ²½ λ³€μ ν™•μΈ
- [ ] `EPOST_CUSTOMER_ID`: μ°μ²΄κµ­ κ³ κ°λ²νΈ
- [ ] `EPOST_API_KEY`: μ°μ²΄κµ­ API ν‚¤
- [ ] `EPOST_SECURITY_KEY`: μ°μ²΄κµ­ λ³΄μ•ν‚¤ (SEED128 μ•”νΈν™”μ©)
- [ ] `EPOST_APPROVAL_NO`: κ³„μ•½ μΉμΈλ²νΈ (μ„ νƒμ‚¬ν•­, μ—†μΌλ©΄ μλ™ μ΅°ν)
- [ ] `EPOST_OFFICE_SER`: κ³µκΈ‰μ§€ μ½”λ“ (μ„ νƒμ‚¬ν•­)

## λ””λ²„κΉ… λ°©λ²•

### 1. Supabase Edge Functions λ΅κ·Έ ν™•μΈ
```bash
# Supabase CLIλ΅ λ΅κ·Έ ν™•μΈ
supabase functions logs shipments-book
```

### 2. λ΅κ·Έμ—μ„ ν™•μΈν•  ν•­λ©
- `π” κ°λ° μ²΄ν¬ - testYn νλΌλ―Έν„°`: testYn κ°’ ν™•μΈ
- `π” κ°λ° μ²΄ν¬ - API νΈμ¶ μ „ νλΌλ―Έν„° κ²€μ¦`: μ „λ‹¬λλ” λ¨λ“  νλΌλ―Έν„° ν™•μΈ
- `π” κ°λ° μ²΄ν¬ - API μ‘λ‹µ κ²€μ¦`: API μ‘λ‹µ ν™•μΈ
- `π” κ°λ° μ²΄ν¬ - URL νλΌλ―Έν„°`: URLμ— testYnμ΄ ν¬ν•¨λλ”μ§€ ν™•μΈ
- `π” κ°λ° μ²΄ν¬ - regData νλΌλ―Έν„°`: regDataμ— testYnμ΄ μ κ±°λμ—λ”μ§€ ν™•μΈ
- `β… μκ±°μμ•½ μƒνƒ ν™•μΈ κ²°κ³Ό`: μκ±°μμ•½ μƒνƒ ν™•μΈ

### 3. μκ±°μμ•½ μƒνƒ ν™•μΈ
`getResInfo` APIλ¥Ό νΈμ¶ν•μ—¬ μ‹¤μ  μκ±°μμ•½μ΄ λ“±λ΅λμ—λ”μ§€ ν™•μΈ:
- `treatStusCd`κ°€ `00` λλ” `01`μ΄λ©΄ μ‹¤μ  μκ±°μμ•½μ΄ λ“±λ΅λ κ²ƒ
- `treatStusCd`κ°€ λ‹¤λ¥Έ κ°’μ΄λ©΄ μκ±°μμ•½ μƒνƒκ°€ μμƒκ³Ό λ‹¤λ¥Ό μ μμ

## λ¬Έμ  ν•΄κ²°

### λ¬Έμ : μ†΅μ¥λ²νΈλ” λ°›μ•μ§€λ§ μ°μ²΄κµ­μ—μ„ λ°©λ¬Έν•μ§€ μ•μ
1. `testYn` νλΌλ―Έν„°κ°€ `'N'`μΌλ΅ μ„¤μ •λμ—λ”μ§€ ν™•μΈ
2. `getResInfo` APIλ¥Ό νΈμ¶ν•μ—¬ μκ±°μμ•½ μƒνƒ ν™•μΈ
3. `treatStusCd`κ°€ `00` λλ” `01`μΈμ§€ ν™•μΈ
4. μ°μ²΄κµ­ κ³ κ°μ„Όν„°(1588-1300)μ— μ†΅μ¥λ²νΈλ΅ λ¬Έμ

### λ¬Έμ : testYnμ΄ 'Y'λ΅ μ„¤μ •λ¨
1. `test_mode` νλΌλ―Έν„°κ°€ `false`λ΅ μ „λ‹¬λμ—λ”μ§€ ν™•μΈ
2. Flutter μ•±μ—μ„ `testMode: false`λ΅ μ„¤μ •λμ—λ”μ§€ ν™•μΈ
3. Edge Functionμ—μ„ `test_mode` νλΌλ―Έν„°κ°€ μ¬λ°”λ¥΄κ² νμ‹±λμ—λ”μ§€ ν™•μΈ

### λ¬Έμ : regDataμ— testYnμ΄ ν¬ν•¨λ¨
1. `regDataParams`μ—μ„ `testYn`μ΄ μ κ±°λμ—λ”μ§€ ν™•μΈ
2. λ΅κ·Έμ—μ„ `testYnRemoved: true`μΈμ§€ ν™•μΈ

### λ¬Έμ : URLμ— testYnμ΄ ν¬ν•¨λμ§€ μ•μ (testYn='N'μΌ λ•)
- μ •μƒ λ™μ‘μ…λ‹λ‹¤. `testYn='N'`μΌ λ•λ” URL νλΌλ―Έν„°μ— ν¬ν•¨ν•μ§€ μ•μµλ‹λ‹¤.

